# ğŸ“‚ Chapter 6: ìœ ë‹‰ìŠ¤ íŒŒì¼ ì‹œìŠ¤í…œ ìš”ì•½

---

## ğŸ”§ íŒŒì¼ ì‹œìŠ¤í…œ êµ¬ì¡°

- **ë¶€íŠ¸ ë¸”ë¡ (Boot Block)**  
  ì‹œìŠ¤í…œ ë¶€íŒ… ì‹œ ì‹¤í–‰ë˜ëŠ” ì½”ë“œ ì €ì¥ (ë””ìŠ¤í¬ ì²« ì„¹í„°).

- **ìŠˆí¼ ë¸”ë¡ (Super Block)**  
  ì „ì²´ íŒŒì¼ ì‹œìŠ¤í…œ ë©”íƒ€ë°ì´í„° ë³´ê´€ (ë¸”ë¡ ìˆ˜, i-node ìˆ˜ ë“±).

- **i-ë¦¬ìŠ¤íŠ¸ (i-list)**  
  íŒŒì¼ì˜ ë©”íƒ€ ì •ë³´ë¥¼ ê°€ì§„ i-nodeë“¤ì˜ ëª©ë¡.  
  ê° íŒŒì¼ì€ í•˜ë‚˜ì˜ i-nodeë¥¼ ê°€ì§€ë©°, í¬ì¸í„°ë¥¼ í†µí•´ ë°ì´í„° ë¸”ë¡ì„ ì°¸ì¡°.

- **ë°ì´í„° ë¸”ë¡ (Data Block)**  
  ì‹¤ì œ íŒŒì¼ì˜ ë‚´ìš©ì„ ì €ì¥í•˜ëŠ” ë¸”ë¡.

---

## ğŸ“ i-ë…¸ë“œì™€ ë¸”ë¡ í¬ì¸í„°

- i-nodeëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨:
  - íŒŒì¼ íƒ€ì… (ì¼ë°˜ íŒŒì¼, ë””ë ‰í„°ë¦¬, ì¥ì¹˜ ë“±)
  - í¬ê¸°, ì†Œìœ ì, ê¶Œí•œ, ì ‘ê·¼/ìˆ˜ì • ì‹œê°„
  - ë°ì´í„° ë¸”ë¡ì„ ê°€ë¦¬í‚¤ëŠ” í¬ì¸í„° (ì§ì ‘, ê°„ì ‘, ì´ì¤‘ ê°„ì ‘, ì‚¼ì¤‘ ê°„ì ‘)

---

## ğŸ“‚ íŒŒì¼ ì…ì¶œë ¥ êµ¬í˜„

- **ì£¼ìš” ì»¤ë„ ìë£Œêµ¬ì¡°**
  - **íŒŒì¼ ë””ìŠ¤í¬ë¦½í„° ë°°ì—´ (Fd Array)**: ê° í”„ë¡œì„¸ìŠ¤ê°€ ë³´ìœ 
  - **ì—´ë¦° íŒŒì¼ í…Œì´ë¸” (Open File Table)**: ì—´ë ¤ ìˆëŠ” ëª¨ë“  íŒŒì¼ì˜ ìƒíƒœ ê¸°ë¡
  - **ë™ì  i-ë…¸ë“œ í…Œì´ë¸”**: ì—´ë ¤ ìˆëŠ” íŒŒì¼ë“¤ì˜ i-node ì •ë³´ë¥¼ ìœ ì§€

- **ì‹œìŠ¤í…œ í˜¸ì¶œ ì˜ˆì‹œ**
  - `open()`, `dup()`, `read()`, `write()`, `close()`

---

## ğŸ“„ íŒŒì¼ ìƒíƒœ ì •ë³´

- **stat êµ¬ì¡°ì²´**
  - `st_mode`: íŒŒì¼ íƒ€ì… ë° ê¶Œí•œ
  - `st_size`: íŒŒì¼ í¬ê¸°
  - `st_uid`, `st_gid`: ì‚¬ìš©ì ë° ê·¸ë£¹ ID
  - `st_atime`, `st_mtime`, `st_ctime`: ì‹œê°„ ì •ë³´

- **ì‚¬ìš© í•¨ìˆ˜**
  - `stat()`, `fstat()`, `lstat()`  
  - ì ‘ê·¼ ê¶Œí•œ ë³€ê²½: `chmod()`, `fchmod()`
  - ì‹œê°„ ë³€ê²½: `utime()`
  - ì†Œìœ ì ë³€ê²½: `chown()`, `fchown()`, `lchown()`

---

## ğŸ“‚ ë””ë ‰í„°ë¦¬ êµ¬í˜„

- ë””ë ‰í„°ë¦¬ë„ í•˜ë‚˜ì˜ íŒŒì¼ì´ë©°, **i-node**ë¥¼ ê°€ì§„ë‹¤.
- ë””ë ‰í„°ë¦¬ ë‚´ë¶€ëŠ” **íŒŒì¼ ì´ë¦„ + i-ë…¸ë“œ ë²ˆí˜¸** ëª©ë¡ (ë””ë ‰í„°ë¦¬ ì—”íŠ¸ë¦¬).
- ì‚¬ìš© í•¨ìˆ˜:
  - ì—´ê¸°: `opendir()`
  - ì½ê¸°: `readdir()`
  - ë‹«ê¸°: `closedir()`
  - ìƒì„±: `mkdir()`
  - ì‚­ì œ: `rmdir()`

---

## ğŸ”— ë§í¬ (Links)

- **í•˜ë“œ ë§í¬ (Hard Link)**
  - ë™ì¼í•œ i-nodeë¥¼ ì°¸ì¡°. ê°™ì€ íŒŒì¼ ì‹œìŠ¤í…œ ë‚´ì—ì„œë§Œ ê°€ëŠ¥.

- **ì‹¬ë³¼ë¦­ ë§í¬ (Symbolic Link)**
  - íŒŒì¼ ê²½ë¡œëª…ì„ ì €ì¥í•˜ëŠ” ë³„ë„ì˜ íŒŒì¼. ë‹¤ë¥¸ íŒŒì¼ ì‹œìŠ¤í…œë„ ê°€ëŠ¥.

- **ì‚¬ìš© í•¨ìˆ˜**
  - ìƒì„±: `link()`, `symlink()`
  - ì œê±°: `unlink()`
  - ë§í¬ í™•ì¸: `readlink()`

---

## âœ… í•µì‹¬ ìš”ì•½

- ìœ ë‹‰ìŠ¤ íŒŒì¼ ì‹œìŠ¤í…œì€ ë¶€íŠ¸/ìŠˆí¼ ë¸”ë¡, i-node, ë°ì´í„° ë¸”ë¡ìœ¼ë¡œ êµ¬ì„±
- ì…ì¶œë ¥ì€ ì»¤ë„ ë‚´ë¶€ ìë£Œêµ¬ì¡°ì™€ ì‹œìŠ¤í…œ í˜¸ì¶œë¡œ ê´€ë¦¬ë¨
- ë””ë ‰í„°ë¦¬ë„ íŒŒì¼ì´ë©°, ë§í¬ëŠ” íŒŒì¼ì— ëŒ€í•œ ë‹¤ë¥¸ ì´ë¦„ì„ ì œê³µ

---

# ğŸ”’ Chapter 7: íŒŒì¼ ë° ë ˆì½”ë“œ ì ê¸ˆ ìš”ì•½


---

## ğŸ“ 7.1 íŒŒì¼ ì ê¸ˆ (`flock`)

- **flock() í•¨ìˆ˜**ë¥¼ ì‚¬ìš©í•˜ì—¬ **íŒŒì¼ ì „ì²´**ì— ì ê¸ˆ ì ìš©
- ì ê¸ˆ ì¢…ë¥˜:
  - `LOCK_SH`: ê³µìœ  ì ê¸ˆ (ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ ì½ê¸° ê°€ëŠ¥)
  - `LOCK_EX`: ë°°íƒ€ ì ê¸ˆ (í•œ í”„ë¡œì„¸ìŠ¤ë§Œ ì“°ê¸° ê°€ëŠ¥)
  - `LOCK_UN`: ì ê¸ˆ í•´ì œ
  - `LOCK_NB`: ë…¼ë¸”ë¡œí‚¹ ëª¨ë“œ (ì ê¸ˆ ì‹¤íŒ¨ ì‹œ ì¦‰ì‹œ ë°˜í™˜)

> ì˜ˆ: ë‘ í”„ë¡œì„¸ìŠ¤ê°€ ê°™ì€ íŒŒì¼ì— `LOCK_EX`ë¥¼ ê±¸ë©´ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë¨

---

## ğŸ“„ 7.2 ë ˆì½”ë“œ ì ê¸ˆ (`fcntl`)

- íŒŒì¼ì˜ **ì¼ë¶€ êµ¬ê°„(ë ˆì½”ë“œ)**ì— ëŒ€í•´ ì ê¸ˆì„ ì„¤ì •
- `fcntl()` ì‹œìŠ¤í…œ í˜¸ì¶œ ì‚¬ìš©
  - `F_GETLK`: ì ê¸ˆ ìƒíƒœ í™•ì¸
  - `F_SETLK`: ì ê¸ˆ ì„¤ì • (ë¹„ë¸”ë¡œí‚¹)
  - `F_SETLKW`: ì ê¸ˆ ì„¤ì • (ë¸”ë¡œí‚¹)
- `flock` êµ¬ì¡°ì²´ë¥¼ í†µí•´ ì‹œì‘ ìœ„ì¹˜, ê¸¸ì´, ìœ í˜•(F_RDLCK/F_WRLCK/F_UNLCK) ì§€ì •
- ì˜ˆì œ:
  - `rdlock.c`: í•™ìƒ ì •ë³´ë¥¼ ì½ê¸° ì „ `F_RDLCK`ìœ¼ë¡œ ì½ê¸° ì ê¸ˆ
  - `wrlock.c`: ì •ë³´ ìˆ˜ì • ì‹œ `F_WRLCK`ìœ¼ë¡œ ì“°ê¸° ì ê¸ˆ

---

## ğŸ”§ 7.3 ê°„ë‹¨í•œ ì ê¸ˆ í•¨ìˆ˜ (`lockf`)

- `fcntl`ë³´ë‹¤ ë‹¨ìˆœí•˜ê²Œ íŒŒì¼ì˜ êµ¬ê°„ ì ê¸ˆì„ ì œì–´í•  ìˆ˜ ìˆìŒ

```c
int lockf(int fd, int cmd, off_t len);
### ğŸ› ï¸ ì£¼ìš” ëª…ë ¹ì–´ (`lockf`)

- `F_LOCK`: ì“°ê¸° ì ê¸ˆ (ì ê¸ˆ í•´ì œ ì‹œê¹Œì§€ ëŒ€ê¸°)
- `F_TLOCK`: ì“°ê¸° ì ê¸ˆ (ì ê²¨ ìˆìœ¼ë©´ ì¦‰ì‹œ ì‹¤íŒ¨)
- `F_ULOCK`: ì ê¸ˆ í•´ì œ
- `F_TEST`: ì ê¸ˆ ì—¬ë¶€ í™•ì¸

> ğŸ’¡ ì˜ˆ: `wrlockf.c`ëŠ” `lockf()`ë¥¼ ì´ìš©í•´ í•™ìƒ ì •ë³´ ìˆ˜ì • ì‹œ í•´ë‹¹ ë ˆì½”ë“œë¥¼ ì ê¸ˆ ì²˜ë¦¬í•©ë‹ˆë‹¤.

---

## ğŸ›¡ï¸ 7.4 ê¶Œê³  ì ê¸ˆ vs ê°•ì œ ì ê¸ˆ

### ğŸ”¹ ê¶Œê³  ì ê¸ˆ (Advisory Locking)
- í”„ë¡œì„¸ìŠ¤ê°€ **ìë°œì ìœ¼ë¡œ** ì ê¸ˆ ê·œì¹™ì„ ë”°ë¦„
- ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ê°€ ì ê¸ˆì„ ë¬´ì‹œí•˜ê³  ì ‘ê·¼í•  ìˆ˜ ìˆìŒ
- ê¸°ë³¸ì ìœ¼ë¡œ **Linux, BSD, macOS**ì—ì„œ ì‚¬ìš©

### ğŸ”¸ ê°•ì œ ì ê¸ˆ (Mandatory Locking)
- **ì»¤ë„ì´ ì ê¸ˆì„ ê°•ì œ**í•¨ â†’ ë¬´ë‹¨ ì ‘ê·¼ ì°¨ë‹¨
- ì„±ëŠ¥ ì €í•˜ ìš°ë ¤ ì¡´ì¬
- ì„¤ì • ë°©ë²•:
  ```bash
  $ chmod 2644 file  # SGID ë¹„íŠ¸ ì„¤ì • + ê·¸ë£¹ ì‹¤í–‰ ê¶Œí•œ ì œê±°

---

# ğŸ“˜ Chapter 8: í”„ë¡œì„¸ìŠ¤

---

## 8.1 ì‰˜ê³¼ í”„ë¡œì„¸ìŠ¤

### ğŸš ì‰˜(Shell)ì´ë€?
- ì‚¬ìš©ìì™€ ìš´ì˜ì²´ì œ ì‚¬ì´ì˜ ì¸í„°í˜ì´ìŠ¤
- ëª…ë ¹ì–´ ì²˜ë¦¬ê¸° ì—­í•  ìˆ˜í–‰

### ğŸ§¾ ë³µí•© ëª…ë ¹ì–´ & ê·¸ë£¹
```bash
$ ëª…ë ¹ì–´1; ëª…ë ¹ì–´2; ...
$ (ëª…ë ¹ì–´1; ëª…ë ¹ì–´2; ...) > íŒŒì¼
n", i, argv[i]);
}
