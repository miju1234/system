# 📂 Chapter 6: 유닉스 파일 시스템 요약

이 문서는 유닉스 및 리눅스 환경에서의 파일 시스템 구현, 입출력 처리, 상태 정보 확인, 디렉터리 및 링크 구조를 설명합니다.

---

## 🔧 파일 시스템 구조

- **부트 블록 (Boot Block)**  
  시스템 부팅 시 실행되는 코드 저장 (디스크 첫 섹터).

- **슈퍼 블록 (Super Block)**  
  전체 파일 시스템 메타데이터 보관 (블록 수, i-node 수 등).

- **i-리스트 (i-list)**  
  파일의 메타 정보를 가진 i-node들의 목록.  
  각 파일은 하나의 i-node를 가지며, 포인터를 통해 데이터 블록을 참조.

- **데이터 블록 (Data Block)**  
  실제 파일의 내용을 저장하는 블록.

---

## 📁 i-노드와 블록 포인터

- i-node는 다음 정보를 포함:
  - 파일 타입 (일반 파일, 디렉터리, 장치 등)
  - 크기, 소유자, 권한, 접근/수정 시간
  - 데이터 블록을 가리키는 포인터 (직접, 간접, 이중 간접, 삼중 간접)

---

## 📂 파일 입출력 구현

- **주요 커널 자료구조**
  - **파일 디스크립터 배열 (Fd Array)**: 각 프로세스가 보유
  - **열린 파일 테이블 (Open File Table)**: 열려 있는 모든 파일의 상태 기록
  - **동적 i-노드 테이블**: 열려 있는 파일들의 i-node 정보를 유지

- **시스템 호출 예시**
  - `open()`, `dup()`, `read()`, `write()`, `close()`

---

## 📄 파일 상태 정보

- **stat 구조체**
  - `st_mode`: 파일 타입 및 권한
  - `st_size`: 파일 크기
  - `st_uid`, `st_gid`: 사용자 및 그룹 ID
  - `st_atime`, `st_mtime`, `st_ctime`: 시간 정보

- **사용 함수**
  - `stat()`, `fstat()`, `lstat()`  
  - 접근 권한 변경: `chmod()`, `fchmod()`
  - 시간 변경: `utime()`
  - 소유자 변경: `chown()`, `fchown()`, `lchown()`

---

## 📂 디렉터리 구현

- 디렉터리도 하나의 파일이며, **i-node**를 가진다.
- 디렉터리 내부는 **파일 이름 + i-노드 번호** 목록 (디렉터리 엔트리).
- 사용 함수:
  - 열기: `opendir()`
  - 읽기: `readdir()`
  - 닫기: `closedir()`
  - 생성: `mkdir()`
  - 삭제: `rmdir()`

---

## 🔗 링크 (Links)

- **하드 링크 (Hard Link)**
  - 동일한 i-node를 참조. 같은 파일 시스템 내에서만 가능.

- **심볼릭 링크 (Symbolic Link)**
  - 파일 경로명을 저장하는 별도의 파일. 다른 파일 시스템도 가능.

- **사용 함수**
  - 생성: `link()`, `symlink()`
  - 제거: `unlink()`
  - 링크 확인: `readlink()`

---

## ✅ 핵심 요약

- 유닉스 파일 시스템은 부트/슈퍼 블록, i-node, 데이터 블록으로 구성
- 입출력은 커널 내부 자료구조와 시스템 호출로 관리됨
- 디렉터리도 파일이며, 링크는 파일에 대한 다른 이름을 제공

---

> 📘 참고: 본 요약은 `chap6.pdf` 자료를 기반으로 작성되었습니다.
